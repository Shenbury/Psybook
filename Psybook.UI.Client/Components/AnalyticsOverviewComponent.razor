@using Psybook.Objects.Reporting

<MudGrid Spacing="3">
    <!-- Key Metrics -->
    <MudItem xs="12">
        <MudCard>
            <MudCardHeader>
                <MudText Typo="Typo.h6" Color="Color.Primary">Key Performance Indicators</MudText>
            </MudCardHeader>
            <MudCardContent>
                <MudGrid Spacing="2">
                    <MudItem xs="12" sm="6" md="3">
                        <MudPaper Class="pa-4 text-center" Style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <MudText Typo="Typo.h4" Style="color: white;">@Analytics.TotalBookings</MudText>
                            <MudText Typo="Typo.body2" Style="color: rgba(255,255,255,0.8);">Total Bookings</MudText>
                        </MudPaper>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="3">
                        <MudPaper Class="pa-4 text-center" Style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <MudText Typo="Typo.h4" Style="color: white;">@Analytics.ActiveBookings</MudText>
                            <MudText Typo="Typo.body2" Style="color: rgba(255,255,255,0.8);">Active Bookings</MudText>
                        </MudPaper>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="3">
                        <MudPaper Class="pa-4 text-center" Style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <MudText Typo="Typo.h4" Style="color: white;">@Analytics.CancellationRate.ToString("F1")%</MudText>
                            <MudText Typo="Typo.body2" Style="color: rgba(255,255,255,0.8);">Cancellation Rate</MudText>
                        </MudPaper>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="3">
                        <MudPaper Class="pa-4 text-center" Style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                            <MudText Typo="Typo.h4" Style="color: white;">@Analytics.CompletionRate.ToString("F1")%</MudText>
                            <MudText Typo="Typo.body2" Style="color: rgba(255,255,255,0.8);">Completion Rate</MudText>
                        </MudPaper>
                    </MudItem>
                </MudGrid>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <!-- Booking Performance Analytics -->
    <MudItem xs="12" md="6">
        <MudCard>
            <MudCardHeader>
                <MudText Typo="Typo.h6" Color="Color.Primary">
                    <MudIcon Icon="@Icons.Material.Filled.TrendingUp" Class="mr-2" />
                    Booking Performance
                </MudText>
            </MudCardHeader>
            <MudCardContent>
                <MudStack Spacing="3">
                    <MudStack Row="true" Justify="Justify.SpaceBetween">
                        <MudText Typo="Typo.body1">Total Bookings</MudText>
                        <MudText Typo="Typo.h6" Color="Color.Success">@Analytics.TotalBookings</MudText>
                    </MudStack>
                    
                    <MudStack Row="true" Justify="Justify.SpaceBetween">
                        <MudText Typo="Typo.body1">Active Bookings</MudText>
                        <MudText Typo="Typo.h6" Color="Color.Primary">@Analytics.ActiveBookings</MudText>
                    </MudStack>
                    
                    <MudStack Row="true" Justify="Justify.SpaceBetween">
                        <MudText Typo="Typo.body1">Average Daily Bookings</MudText>
                        <MudText Typo="Typo.h6" Color="Color.Info">
                            @(Analytics.ReportPeriod.TotalDays > 0 ? (Analytics.TotalBookings / Analytics.ReportPeriod.TotalDays).ToString("F1") : "0")
                        </MudText>
                    </MudStack>
                </MudStack>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <!-- Customer Analytics -->  
    <MudItem xs="12" md="6">
        <MudCard>
            <MudCardHeader>
                <MudText Typo="Typo.h6" Color="Color.Primary">
                    <MudIcon Icon="@Icons.Material.Filled.People" Class="mr-2" />
                    Customer Analytics
                </MudText>
            </MudCardHeader>
            <MudCardContent>
                <MudStack Spacing="3">
                    <MudStack Row="true" Justify="Justify.SpaceBetween">
                        <MudText Typo="Typo.body1">Total Customers</MudText>
                        <MudText Typo="Typo.h6" Color="Color.Primary">@Analytics.CustomerStats.TotalCustomers</MudText>
                    </MudStack>
                    
                    <MudStack Row="true" Justify="Justify.SpaceBetween">
                        <MudText Typo="Typo.body1">Returning Customers</MudText>
                        <MudText Typo="Typo.h6" Color="Color.Success">@Analytics.CustomerStats.ReturningCustomers</MudText>
                    </MudStack>
                    
                    <MudStack Row="true" Justify="Justify.SpaceBetween">
                        <MudText Typo="Typo.body1">Return Rate</MudText>
                        <MudText Typo="Typo.h6" Color="Color.Info">@Analytics.CustomerStats.ReturnRate.ToString("F1")%</MudText>
                    </MudStack>
                    
                    <MudStack Row="true" Justify="Justify.SpaceBetween">
                        <MudText Typo="Typo.body1">Avg Bookings per Customer</MudText>
                        <MudText Typo="Typo.h6" Color="Color.Secondary">@Analytics.CustomerStats.AverageBookingsPerCustomer.ToString("F1")</MudText>
                    </MudStack>
                </MudStack>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <!-- Performance Metrics -->
    <MudItem xs="12">
        <MudCard>
            <MudCardHeader>
                <MudText Typo="Typo.h6" Color="Color.Primary">
                    <MudIcon Icon="@Icons.Material.Filled.Speed" Class="mr-2" />
                    System Performance
                </MudText>
            </MudCardHeader>
            <MudCardContent>
                <MudGrid Spacing="2">
                    <MudItem xs="12" sm="6" md="3">
                        <MudStack AlignItems="AlignItems.Center" Spacing="1">
                            <MudText Typo="Typo.caption" Color="Color.Secondary">Avg Processing Time</MudText>
                            <MudText Typo="Typo.h6" Color="Color.Primary">@Analytics.Performance.AverageProcessingTime.ToString("F0")ms</MudText>
                        </MudStack>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="3">
                        <MudStack AlignItems="AlignItems.Center" Spacing="1">
                            <MudText Typo="Typo.caption" Color="Color.Secondary">Peak Bookings/Hour</MudText>
                            <MudText Typo="Typo.h6" Color="Color.Success">@Analytics.Performance.PeakBookingsPerHour</MudText>
                        </MudStack>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="3">
                        <MudStack AlignItems="AlignItems.Center" Spacing="1">
                            <MudText Typo="Typo.caption" Color="Color.Secondary">System Uptime</MudText>
                            <MudText Typo="Typo.h6" Color="Color.Info">@Analytics.Performance.SystemUptime.ToString("F2")%</MudText>
                        </MudStack>
                    </MudItem>
                    
                    <MudItem xs="12" sm="6" md="3">
                        <MudStack AlignItems="AlignItems.Center" Spacing="1">
                            <MudText Typo="Typo.caption" Color="Color.Secondary">API Response Time</MudText>
                            <MudText Typo="Typo.h6" Color="Color.Warning">@Analytics.Performance.ResponseTime.ToString("F0")ms</MudText>
                        </MudStack>
                    </MudItem>
                </MudGrid>
            </MudCardContent>
        </MudCard>
    </MudItem>
</MudGrid>

@code {
    [Parameter] public BookingAnalytics Analytics { get; set; } = null!;
}